<!DOCTYPE html>
<html>
<head>
    <title>🚀跨境全渠道智能计价系统Pro</title>
    <style>
        :root {--profit: #4CAF50; --loss: #f44336; --warning: #FFC107}
        body {font-family: 'Segoe UI', sans-serif; max-width: 1200px; margin: 20px auto; background: #f8f9fa}
        .dashboard {background: white; padding: 25px; border-radius: 10px; box-shadow: 0 3px 10px rgba(0,0,0,0.1)}
        .grid {display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 15px; margin: 15px 0}
        .param-group {margin: 10px 0}
        label {display: block; margin: 8px 0; color: #2c3e50; font-weight: 500}
        input, select {width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px}
        .hint {font-size: 0.85em; color: #666; margin-top: 3px}
        .result {background: #f8f9fa; padding: 15px; margin-top: 20px; border-radius: 5px}
        .warning {color: var(--warning); font-weight: bold}
        .profit {color: var(--profit)}
        .loss {color: var(--loss)}
        .comp-indicator {padding: 5px 10px; border-radius: 12px; display: inline-block}
    </style>
</head>
<body>
    <div class="dashboard">
        <h2>🌍 跨境全渠道智能计价系统</h2>
        
        <!-- 核心参数区 -->
        <div class="grid">
            <div class="param-group">
                <label>🏷️ 平台选择</label>
                <select id="platform">
                    <option value="amazon">亚马逊（FBA建议）</option>
                    <option value="walmart">沃尔玛（需验厂）</option>
                    <option value="ebay">eBay（高退货预警）</option>
                    <option value="temu">Temu（低价策略≤$15）</option>
                    <option value="etsy">Etsy（手工定制）</option>
                    <option value="shein_full">Shein全托管</option>
                    <option value="shein_half">Shein半托管</option>
                </select>
                <div class="hint" id="platformTips"></div>
            </div>
            
            <div class="param-group">
                <label>📦 产品类目</label>
                <select id="category">
                    <option value="3c" data-commission="8">3C电子（8%）</option>
                    <option value="home" data-commission="10">家居用品（10%）</option>
                    <option value="auto" data-commission="12">汽配（12%）</option>
                    <option value="pet" data-commission="10">宠物用品（10%）</option>
                    <option value="apparel" data-commission="15">服装（15%）</option>
                    <option value="adult" data-commission="20">成人用品（20%）</option>
                    <option value="beauty" data-commission="18">美妆（18%）</option>
                    <option value="jewelry" data-commission="15">饰品（15%）</option>
                    <option value="custom" data-commission="5">定制手工（5%+$1服务费）</option>
                </select>
                <div class="hint">当前佣金率：<span id="commissionRate">8</span>%</div>
            </div>
        </div>

        <!-- 成本参数区 -->
        <div class="grid">
            <div class="param-group">
                <label>💰 采购成本（CNY）</label>
                <input type="number" id="costCNY" value="100" step="1">
                <div class="hint">含包装/认证等附加成本</div>
            </div>
            
            <div class="param-group">
                <label>🎯 目标利润率（%）</label>
                <input type="number" id="profitRate" value="30" step="1">
                <div class="hint">建议：3C类25-35%，服装类35-45%</div>
            </div>
            
            <div class="param-group">
                <label>🛃 关税税率（%）</label>
                <input type="number" id="tariffRate" value="0" step="1">
                <div class="hint">美国800USD以下免征</div>
            </div>
        </div>

        <!-- 物流及促销区 -->
        <div class="grid">
            <div class="param-group">
                <label>📦 单件运费（USD）</label>
                <input type="number" id="shippingUSD" value="3.5" step="0.1">
                <div class="hint">根据体积重量浮动±40%</div>
            </div>
            
            <div class="param-group">
                <label>💱 汇率（CNY→USD）</label>
                <input type="number" id="exchangeRate" value="7.25" step="0.01">
                <div class="hint">近3月波动范围：7.1-7.4</div>
            </div>
            
            <div class="param-group">
                <label>🎁 促销预留（%）</label>
                <input type="number" id="promotion" value="10" step="1">
                <div class="hint">Prime Day/黑五折扣空间</div>
            </div>
        </div>

        <!-- 结果展示区 -->
        <div class="result">
            <h3>📊 定价策略分析</h3>
            <p>安全售价范围：<span class="profit">$<span id="priceRange">0.00 - 0.00</span></span></p>
            <p>即时利润率：<span id="profitPercent" class="profit">0</span>% | 促销后利润率：<span id="promoProfit" class="warning">0</span>%</p>
            <p>竞争力指数：
                <span id="competitiveness" class="comp-indicator">0</span>/100 
                <span id="competitivenessTip" class="warning"></span>
            </p>
            
            <h3>🚨 风险预警</h3>
            <div id="riskAssessment" class="warning"></div>
            
            <h3>📦 成本结构</h3>
            <p>采购成本：$<span id="costUSD">0.00</span> | 物流：$<span id="logistics">0.00</span></p>
            <p>关税：$<span id="tariff">0.00</span> | 佣金：$<span id="commission">0.00</span></p>
            <p>最终利润：<span id="finalProfit" class="profit">$0.00</span></p>
        </div>
    </div>

<script>
// 核心商业逻辑（整合网页1/6/7的运营策略）
function calculate() {
    const params = {
        costCNY: Math.max(0, parseFloat(document.getElementById('costCNY').value)) || 0,
        profitRate: Math.max(0, parseFloat(document.getElementById('profitRate').value)) / 100 || 0,
        shippingUSD: Math.max(0, parseFloat(document.getElementById('shippingUSD').value)) || 0,
        tariffRate: Math.max(0, parseFloat(document.getElementById('tariffRate').value)) / 100 || 0,
        exchangeRate: Math.max(6.5, parseFloat(document.getElementById('exchangeRate').value)) || 7.25,
        commissionRate: parseFloat(document.querySelector('#category option:checked').dataset.commission) / 100,
        promotion: Math.max(0, parseFloat(document.getElementById('promotion').value)) / 100 || 0,
        platform: document.getElementById('platform').value,
        category: document.getElementById('category').value
    };

    // 平台特殊策略处理（网页7的平台特性）
    let platformAdjust = {
        temu: -0.15,    // Temu低价策略
        etsy: 0.05,     // Etsy手工溢价
        shein_full: 0.2 // Shein全托管价差
    }[params.platform] || 0;

    // 成本计算（含关税叠加）
    let costUSD = params.costCNY / params.exchangeRate;
    let tariff = costUSD * params.tariffRate;
    let serviceFee = params.category === 'custom' ? 1 : 0; // 手工定制服务费
    
    // 平台限制检测（网页7的合规要求）
    if(params.platform === 'temu' && costUSD > 8) {
        document.getElementById('platformTips').innerHTML = '⚠️ Temu建议采购价≤$8';
        costUSD = Math.min(costUSD, 8);
    }

    // 动态定价模型（网页6的定价公式优化）
    const totalCost = costUSD + params.shippingUSD + tariff + serviceFee;
    const basePrice = (totalCost * (1 + params.profitRate + platformAdjust)) / (1 - params.commissionRate);
    const promoPrice = basePrice * (1 - params.promotion);
    
    // 竞争力评估（三级警示系统）
    const priceSensitivity = {'3c':0.8, 'home':0.7, 'apparel':0.6}[params.category] || 0.5;
    const compScore = Math.min(100, (basePrice*priceSensitivity + params.profitRate*100)*0.8);
    
    // 可视化警示系统
    const compElement = document.getElementById('competitiveness');
    const tipElement = document.getElementById('competitivenessTip');
    if(compScore < 60) {
        compElement.className = 'comp-indicator loss';
        tipElement.innerHTML = '🔴 危险：落后85%竞品';
    } else if(compScore >= 80) {
        compElement.className = 'comp-indicator profit';
        tipElement.innerHTML = '🟢 卓越：优于80%竞品';
    } else {
        compElement.className = 'comp-indicator warning';
        tipElement.innerHTML = '🟡 中等：建议优化价格策略';
    }

    // 风险检测引擎（网页6/8的合规规则）
    const riskRules = [
        {condition: params.commissionRate > 0.15, message: '⚠️ 高佣金类目需确保转化率'},
        {condition: params.platform === 'temu' && basePrice > 15, message: '⚠️ Temu建议售价≤$15'},
        {condition: params.tariffRate > 0, message: '⚠️ 关税可能影响清关时效'},
        {condition: params.category === 'apparel' && params.profitRate < 0.3, message: '⚠️ 服装类建议35%+利润率'}
    ];
    const risks = riskRules.filter(r => r.condition).map(r => r.message);

    // 结果输出
    document.getElementById('priceRange').textContent = `${promoPrice.toFixed(2)} - ${basePrice.toFixed(2)}`;
    document.getElementById('profitPercent').textContent = ((basePrice - totalCost)/basePrice*100).toFixed(1);
    document.getElementById('promoProfit').textContent = ((promoPrice - totalCost)/promoPrice*100).toFixed(1);
    document.getElementById('competitiveness').textContent = compScore.toFixed(0);
    document.getElementById('riskAssessment').innerHTML = risks.join(' · ') || '✅ 当前参数处于安全阈值';
    document.getElementById('costUSD').textContent = costUSD.toFixed(2);
    document.getElementById('logistics').textContent = params.shippingUSD.toFixed(2);
    document.getElementById('tariff').textContent = tariff.toFixed(2);
    document.getElementById('commission').textContent = (basePrice * params.commissionRate).toFixed(2);
    document.getElementById('finalProfit').textContent = `$${(basePrice - totalCost - (basePrice * params.commissionRate)).toFixed(2)}`;
    
    // 利润率颜色标记
    document.getElementById('profitPercent').className = 
        document.getElementById('profitPercent').textContent < 15 ? 'loss' : 'profit';
}

// 实时计算
document.querySelectorAll('input, select').forEach(el => el.addEventListener('input', calculate));
calculate();
</script>
</body>
</html>